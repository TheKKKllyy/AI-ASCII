<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Chat</title>
<style>
  body { font-family: sans-serif; }
  .chat { max-width: 600px; margin: 2em auto; }
  .message { margin-bottom: 1em; }
  .user { color: blue; }
  .ai { color: green; }
</style>
</head>
<body>
<div class="chat" id="chat"></div>
<input type="text" id="input" placeholder="Type your message..." style="width: 80%;">
<button onclick="sendMessage()">Send</button>

<script>
const PROXY_URL = "https://your-proxy-url.com/chat"; // replace with your Render URL

async function sendMessage() {
  const input = document.getElementById("input");
  const message = input.value;
  input.value = "";

  appendMessage("You", message, "user");

  const response = await fetch(PROXY_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      messages: [
        { role: "system", content: "You are a witty, friendly AI. Always respond in English only. Prefix messages with 'AI:' and use Markdown formatting for bold, italics, headers, and lists where appropriate." },
        { role: "user", content: message }
      ]
    })
  });

  const data = await response.json();
  const reply = data.choices?.[0]?.message?.content || "AI did not respond.";
  appendMessage("AI", reply, "ai");
}

function appendMessage(who, text, cls) {
  const chat = document.getElementById("chat");
  const div = document.createElement("div");
  div.className = `message ${cls}`;
  div.innerHTML = `<strong>${who}:</strong> ${text}`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}
</script>
</body>
</html>
